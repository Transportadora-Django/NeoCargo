<!DOCTYPE html>
<html lang="pt-br">
<head>
    <!-- ==============================                    {% if user.is_authenticated %}
                    <li class="nav-item">
                        <a class="nav-link" href="{% url 'pedidos:listar' %}">
                            <i class="fas fa-clipboard-list me-1" aria-hidden="true"></i>
                            Meus Pedidos
                        </a>
                    </li>
                    {% endif %}
                    <li class="nav-item">
                        <a 
                            class="nav-link" 
                            href="#" 
                            onclick="alert('Em desenvolvimento')"
                            role="button"
                        >
                            <i class="fas fa-box me-1" aria-hidden="true"></i>
                            Cargas
                        </a>
                    </li>=================== -->
    <!-- DOCUMENT META INFORMATION                                    -->
    <!-- ============================================================ -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>{% block title %}NeoCargo{% endblock %}</title>
    
    <!-- ============================================================ -->
    <!-- EXTERNAL DEPENDENCIES                                       -->
    <!-- ============================================================ -->
    <!-- Bootstrap CSS Framework -->
    <link 
        href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" 
        rel="stylesheet"
    >
    
    <!-- Font Awesome Icon Library -->
    <link 
        rel="stylesheet" 
        href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    >
    
    <!-- ============================================================ -->
    <!-- CUSTOM STYLESHEETS                                          -->
    <!-- ============================================================ -->
    {% load static %}
    <link rel="stylesheet" href="{% static 'css/style.css' %}">
    <link rel="stylesheet" href="{% static 'css/alerts.css' %}">
    
    <!-- Page-specific CSS injection point -->
    {% block extra_css %}{% endblock %}
</head>

<body>
    <!-- ============================================================ -->
    <!-- NAVIGATION COMPONENT                                         -->
    <!-- ============================================================ -->
    <nav class="navbar navbar-expand-lg navbar-dark navbar-neocargo">
        <div class="container">
            <!-- Brand Logo -->
            <a class="navbar-brand d-flex align-items-center" href="{% url 'home' %}">
                <img 
                    src="{% static 'assets/Logo-NeoCargo-White.svg' %}" 
                    alt="NeoCargo - Sistema de Gestão de Transportadora" 
                    class="navbar-logo me-2"
                >
            </a>
            
            <!-- Mobile Menu Toggle -->
            <button 
                class="navbar-toggler" 
                type="button" 
                data-bs-toggle="collapse" 
                data-bs-target="#navbarNav"
                aria-controls="navbarNav"
                aria-expanded="false"
                aria-label="Toggle navigation"
            >
                <span class="navbar-toggler-icon"></span>
            </button>
            
            <!-- Navigation Menu -->
            <div class="collapse navbar-collapse" id="navbarNav">
                <div class="d-flex w-100 justify-content-end">
                <ul class="navbar-nav">
                    <li class="nav-item">
                        <a class="nav-link" href="{% url 'home' %}">
                            <i class="fas fa-home me-1" aria-hidden="true"></i>
                            Início
                        </a>
                    </li>
                    {% if user.is_authenticated %}
                        {% if user.profile.is_owner %}
                            <!-- Menu para Owner -->
                            <li class="nav-item">
                                <a class="nav-link" href="{% url 'gestao:dashboard_dono' %}">
                                    <i class="fas fa-crown me-1" aria-hidden="true"></i>
                                    Dashboard
                                </a>
                            </li>
                            <li class="nav-item dropdown">
                                <a class="nav-link dropdown-toggle" href="#" id="navbarDropdownGestao" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                                    <i class="fas fa-cog me-1" aria-hidden="true"></i>
                                    Gestão
                                </a>
                                <ul class="dropdown-menu" aria-labelledby="navbarDropdownGestao">
                                    <li>
                                        <a class="dropdown-item" href="{% url 'gestao:listar_usuarios' %}">
                                            <i class="fas fa-users me-2"></i>
                                            Usuários
                                        </a>
                                    </li>
                                    <li>
                                        <a class="dropdown-item" href="{% url 'gestao:listar_solicitacoes' %}">
                                            <i class="fas fa-tasks me-2"></i>
                                            Solicitações
                                        </a>
                                    </li>
                                    <li><hr class="dropdown-divider"></li>
                                    <li>
                                        <a class="dropdown-item" href="{% url 'veiculos:listar_especificacoes' %}">
                                            <i class="fas fa-cogs me-2"></i>
                                            Especificações
                                        </a>
                                    </li>
                                    <li>
                                        <a class="dropdown-item" href="{% url 'veiculos:listar_veiculos' %}">
                                            <i class="fas fa-truck me-2"></i>
                                            Veículos
                                        </a>
                                    </li>
                                </ul>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="{% url 'pedidos:listar' %}">
                                    <i class="fas fa-box me-1" aria-hidden="true"></i>
                                    Pedidos
                                </a>
                            </li>
                        {% else %}
                            <!-- Menu para Cliente/Motorista -->
                            <li class="nav-item">
                                <a class="nav-link" href="{% url 'dashboard:cliente' %}">
                                    <i class="fas fa-tachometer-alt me-1" aria-hidden="true"></i>
                                    Dashboard
                                </a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="{% url 'pedidos:criar' %}">
                                    <i class="fas fa-plus-circle me-1" aria-hidden="true"></i>
                                    Criar Pedido
                                </a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="{% url 'pedidos:listar' %}">
                                    <i class="fas fa-clipboard-list me-1" aria-hidden="true"></i>
                                    Meus Pedidos
                                </a>
                            </li>
                        {% endif %}
                    {% endif %}
                    <li class="nav-item">
                        <a 
                            class="nav-link" 
                            href="#" 
                            onclick="alert('Em desenvolvimento')"
                            role="button"
                        >
                            <i class="fas fa-route me-1" aria-hidden="true"></i>
                            Rotas
                        </a>
                    </li>
                    {% if not user.is_authenticated %}
                    <li class="nav-item">
                        <a 
                            class="nav-link" 
                            href="#" 
                            onclick="alert('Em desenvolvimento')"
                            role="button"
                        >
                            <i class="fas fa-info-circle me-1" aria-hidden="true"></i>
                            Sobre
                        </a>
                    </li>
                    {% endif %}
                    
                    <!-- Authentication Links -->
                    {% if user.is_authenticated %}
                        <!-- User Menu for Authenticated Users -->
                        <li class="nav-item dropdown">
                            <a 
                                class="nav-link dropdown-toggle" 
                                href="#" 
                                id="userDropdown" 
                                role="button" 
                                data-bs-toggle="dropdown" 
                                aria-expanded="false"
                            >
                                <i class="fas fa-user me-1" aria-hidden="true"></i>
                                {{ user.get_full_name|default:user.username }}
                            </a>
                            <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="userDropdown">
                                <li>
                                    <a class="dropdown-item" href="{% url 'dashboard:cliente' %}">
                                        <i class="fas fa-tachometer-alt me-2"></i>
                                        Dashboard
                                    </a>
                                </li>
                                <li>
                                    <a class="dropdown-item" href="{% url 'contas:perfil' %}">
                                        <i class="fas fa-user-edit me-2"></i>
                                        Meu Perfil
                                    </a>
                                </li>
                                
                                <!-- Links de Mudança de Perfil (apenas para não-owners) -->
                                {% if not user.profile.is_owner %}
                                <li><hr class="dropdown-divider"></li>
                                <li>
                                    <a class="dropdown-item" href="{% url 'gestao:minhas_solicitacoes' %}">
                                        <i class="fas fa-exchange-alt me-2"></i>
                                        Minhas Solicitações
                                    </a>
                                </li>
                                <li>
                                    <a class="dropdown-item" href="{% url 'gestao:solicitar_mudanca' %}">
                                        <i class="fas fa-user-plus me-2"></i>
                                        Solicitar Mudança de Perfil
                                    </a>
                                </li>
                                {% endif %}
                                
                                <li><hr class="dropdown-divider"></li>
                                <li>
                                    <a class="dropdown-item" href="{% url 'contas:logout' %}">
                                        <i class="fas fa-sign-out-alt me-2"></i>
                                        Sair
                                    </a>
                                </li>
                            </ul>
                        </li>
                    {% else %}
                        <!-- Login/Signup Links for Unauthenticated Users -->
                        <li class="nav-item">
                            <a class="nav-link" href="{% url 'contas:login' %}">
                                <i class="fas fa-sign-in-alt me-1" aria-hidden="true"></i>
                                Entrar
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="btn btn-primary ms-2" href="{% url 'contas:signup' %}">
                                <i class="fas fa-user-plus me-1" aria-hidden="true"></i>
                                Criar Conta
                            </a>
                        </li>
                    {% endif %}
                </ul>
                </div>
            </div>
        </div>
    </nav>

    <!-- ============================================================ -->
    <!-- MAIN CONTENT AREA                                            -->
    <!-- ============================================================ -->
    <main class="main-content" role="main">
        <!-- ============================================================ -->
        <!-- SISTEMA DE ALERTAS CENTRALIZADO                             -->
        <!-- ============================================================ -->
        {% if messages %}
            <div class="alert-overlay">
                <div class="container">
                    {% for message in messages %}
                        {% include 'components/alert.html' with type=message.tags|default:'info' message=message animated=True dismissible=True %}
                    {% endfor %}
                </div>
            </div>
        {% endif %}

        <!-- Page Content Injection Point -->
        {% block content %}{% endblock %}
    </main>

    <!-- ============================================================ -->
    <!-- FOOTER COMPONENT                                             -->
    <!-- ============================================================ -->
    <footer class="footer-neocargo" role="contentinfo">
        <div class="container py-3">
            <!-- Main Footer Content -->
            <div class="row align-items-center">
                <div class="col-12">
                    <div class="d-flex align-items-center justify-content-center">
                        <img 
                            src="{% static 'assets/Logo-NeoCargo-White.svg' %}" 
                            alt="NeoCargo Logo" 
                            class="footer-logo me-3"
                        >
                        <span class="text-white">Sistema de Gestão de Transportadora</span>
                    </div>
                </div>
            </div>

            <!-- Visual Divider -->
            <hr class="footer-divider">

            <!-- Copyright Information -->
            <div class="text-center">
                <small class="text-white">
                    © 2025 NeoCargo. Projeto acadêmico - Universidade de Brasília (UnB)
                </small>
            </div>
        </div>
    </footer>

    <!-- ============================================================ -->
    <!-- JAVASCRIPT DEPENDENCIES                                     -->
    <!-- ============================================================ -->
    <!-- Bootstrap JavaScript Bundle -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    
    <!-- Custom JavaScript -->
    <script src="{% static 'js/app.js' %}"></script>
    
    <!-- Page-specific JS injection point -->
    {% block extra_js %}{% endblock %}
</body>
</html>
